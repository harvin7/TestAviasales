const { chromium } = require('playwright');

(async () => {
  const browser = await chromium.launch({ headless: false });
  const context = await browser.newContext();
  const page = await context.newPage();

  await page.goto('https://www.aviasales.com/');

  const switchButton = await page.$x("//div[contains(@class, 's__qA7rcyb073tQMmYx1OIl')]/label[@data-test-id='switch']/input");

  await switchButton[0].click();
  
  await page.fill('name=origin', 'New York, Kennedy airport');

  await page.fill('name=destination', 'Berlin');

  await page.fill('name=date', 'October 30');

  await page.check('name=no-return');

  await page.fill('name=adults', '2');
  await page.selectOption('name=class', 'Economy');

  await page.click('id=submit-button');

  await page.waitForURL('**/search**');

  if (page.url().includes('/search')) {
    console.log('New search page is opened.');
  } else {
    console.log('New search page is not opened.');
  }

  await browser.close();
})();
